$SAMLResponse = "PHNhbWxwOlJlc3BvbnNlIElEPSJfYTcxYmRkMTUtMThmYi00MmUwLTlkMzktY2NiNWJkYWVlNWNiIiBWZXJzaW9uPSIyLjAiIElzc3VlSW5zdGFudD0iMjAxNS0wNi0yM1QxNzo1MzozNy4xNTFaIiBEZXN0aW5hdGlvbj0iaHR0cHM6Ly9hc2ttYWRpc29uY29sbGVnZS0tdHN0LmN1c3RoZWxwLmNvbS9jaS9vcGVubG9naW4vc2FtbC9zdWJqZWN0L0NvbnRhY3QuQ3VzdG9tRmllbGRzLnN0dWRlbnRfaWQiIENvbnNlbnQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpjb25zZW50OnVuc3BlY2lmaWVkIiB4bWxuczpzYW1scD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb3RvY29sIj48SXNzdWVyIHhtbG5zPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj5odHRwOi8vZmVkZXJhdGlvbi5tYWRpc29uY29sbGVnZS5lZHUvYWRmcy9zZXJ2aWNlcy90cnVzdDwvSXNzdWVyPjxzYW1scDpTdGF0dXM%2BPHNhbWxwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIgLz48L3NhbWxwOlN0YXR1cz48QXNzZXJ0aW9uIElEPSJfMGY2MTBmMzYtN2Q4NS00MTdiLThmMGItZDViN2YxMWQyOGIzIiBJc3N1ZUluc3RhbnQ9IjIwMTUtMDYtMjNUMTc6NTM6MzcuMTUxWiIgVmVyc2lvbj0iMi4wIiB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI%2BPElzc3Vlcj5odHRwOi8vZmVkZXJhdGlvbi5tYWRpc29uY29sbGVnZS5lZHUvYWRmcy9zZXJ2aWNlcy90cnVzdDwvSXNzdWVyPjxkczpTaWduYXR1cmUgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiPjxkczpTaWduZWRJbmZvPjxkczpDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIiAvPjxkczpTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNyc2Etc2hhMjU2IiAvPjxkczpSZWZlcmVuY2UgVVJJPSIjXzBmNjEwZjM2LTdkODUtNDE3Yi04ZjBiLWQ1YjdmMTFkMjhiMyI%2BPGRzOlRyYW5zZm9ybXM%2BPGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIiAvPjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiIC8%2BPC9kczpUcmFuc2Zvcm1zPjxkczpEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGVuYyNzaGEyNTYiIC8%2BPGRzOkRpZ2VzdFZhbHVlPnVKRXlKRnM0ZUlsY3A0Smp4UDF6TmcwRHRYcDVDelhkMTlCUVF5WFpHMUE9PC9kczpEaWdlc3RWYWx1ZT48L2RzOlJlZmVyZW5jZT48L2RzOlNpZ25lZEluZm8%2BPGRzOlNpZ25hdHVyZVZhbHVlPk15djZVYWlDZFNzT1VZYkN5K21xUUNZU1hsbUgrRjJMN1dyaWtKdVN0Mm9ua2NWY3ZiemRJMHRlYzVheXJ0anQvdiszQ2lGVmovSlRQRU1mOFZreHZJdVRkblRYR3g1QWMvKzdPU0ZNbVQ0NTNUWTJFY3J1YlBWc2JrZGpCVEJNTmttdXV4YVNRdHJVdlNIdmJOSGNPd1pmUFJvUzRnMi8xMVFYSTdlck5rd0JLSWhkTmlKdmlNRGFIVzgrOG0yeDBtRkphaEhMRWU3enM3RjJqR0FGYnJ0SFM2S2Fpd1llc1lHUlB5VDFlVWpqVXhqSE8vcXRqNU5laDFXQVJ2Mm5UREM4NUZacXNqY1JZY3E2U1F1S3Fuajh3SGxhNkl6YVRONDJnSjJ4bmFibEdhdVVnRW1hUlg1SG9Say9DWkY1UUlLR0hnN1A0MnVQUWFhTHRxNDlvZz09PC9kczpTaWduYXR1cmVWYWx1ZT48S2V5SW5mbyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI%2BPGRzOlg1MDlEYXRhPjxkczpYNTA5Q2VydGlmaWNhdGU%2BTUlJR1FqQ0NCU3FnQXdJQkFnSVJBTlkxK1pBbzg4WjNTSXlFaG52ODRkRXdEUVlKS29aSWh2Y05BUUVGQlFBd2dZNHhDekFKQmdOVkJBWVRBa2RDTVJzd0dRWURWUVFJRXhKSGNtVmhkR1Z5SUUxaGJtTm9aWE4wWlhJeEVEQU9CZ05WQkFjVEIxTmhiR1p2Y21ReEdqQVlCZ05WQkFvVEVVTlBUVTlFVHlCRFFTQk1hVzFwZEdWa01UUXdNZ1lEVlFRREV5dERUMDFQUkU4Z1JYaDBaVzVrWldRZ1ZtRnNhV1JoZEdsdmJpQlRaV04xY21VZ1UyVnlkbVZ5SUVOQk1CNFhEVEUwTURneE1qQXdNREF3TUZvWERURTJNRGd4TVRJek5UazFPVm93Z2dFK01STXdFUVlEVlFRRkV3cERhR0Z3ZEdWeUlETTRNUk13RVFZTEt3WUJCQUdDTnp3Q0FRTVRBbFZUTVJvd0dBWURWUVFQRXhGSGIzWmxjbTV0Wlc1MElFVnVkR2wwZVRFTE1Ba0dBMVVFQmhNQ1ZWTXhEakFNQmdOVkJCRVRCVFV6TnpBME1Rc3dDUVlEVlFRSUV3SlhTVEVRTUE0R0ExVUVCeE1IVFdGa2FYTnZiakViTUJrR0ExVUVDUk1TTVRjd01TQlhjbWxuYUhRZ1UzUnlaV1YwTVNjd0pRWURWUVFLRXg1TllXUnBjMjl1SUVGeVpXRWdWR1ZqYUc1cFkyRnNJRU52Ykd4bFoyVXhNREF1QmdOVkJBc1RKMDFoWkdsemIyNGdRWEpsWVNCVVpXTm9ibWxqWVd3Z1EyOXNiR1ZuWlNCRWFYTjBjbWxqZERFYU1CZ0dBMVVFQ3hNUlEwOU5UMFJQSUVWV0lGTkhReUJUVTB3eEpqQWtCZ05WQkFNVEhXWmxaR1Z5WVhScGIyNHViV0ZrYVhOdmJtTnZiR3hsWjJVdVpXUjFNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQWpxNGp3Y3d5enZPRlU4eDBCKzhEbFlBMm5oZXhXd1oxZmdHZ2tCNjBwZzkxeGpqaDV3M0x3K1luZWVheUhMajdsU293cTZ4cUd2bm8yOWJhclNCMkQwN2ZReDBBZG00bmZIV3dHU1ZLYnFvbXgwakVyeVpiMmJ0bU1IeVNPR0IvNFNhSWUyczJaYSt3eHNsazdZZU5Pa2tNcmZITk03SWtOS0hjVlhRN2U3OExmQmpubXFHc3drMHlvRDNsVG1mUVFvWjRBbTlGemJGZFJteHl2Q3JsNzMvNDlYL2RlVlVyWlVEaFY2bW1wTmNiUUp2Mi9xVzhER21hU2U0YTU2TXVpUmttaFRYRStBVUloc0dqRUo0cnlmSmtsRFRpTjJ0Q2FlVG1HYUpEOWdmWHpQODBOUkNIM1JIL3B1R1BvWnkvQTVHNUp2dmdudFFjRXZIMDJENUZPUUlEQVFBQm80SUI1akNDQWVJd0h3WURWUjBqQkJnd0ZvQVVpRVJSLzFBcWFWNHRpUFFodXRrTThzN0w2bnd3SFFZRFZSME9CQllFRkVVdDVYOGpacWZ6eXJzNHlOc00zaW5Sd3UzTk1BNEdBMVVkRHdFQi93UUVBd0lGb0RBTUJnTlZIUk1CQWY4RUFqQUFNRFFHQTFVZEpRUXRNQ3NHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWdZS0t3WUJCQUdDTndvREF3WUpZSVpJQVliNFFnUUJNRVlHQTFVZElBUS9NRDB3T3dZTUt3WUJCQUd5TVFFQ0FRVUJNQ3N3S1FZSUt3WUJCUVVIQWdFV0hXaDBkSEJ6T2k4dmMyVmpkWEpsTG1OdmJXOWtieTVqYjIwdlExQlRNRk1HQTFVZEh3Uk1NRW93U0tCR29FU0dRbWgwZEhBNkx5OWpjbXd1WTI5dGIyUnZZMkV1WTI5dEwwTlBUVTlFVDBWNGRHVnVaR1ZrVm1Gc2FXUmhkR2x2YmxObFkzVnlaVk5sY25abGNrTkJMbU55YkRDQmhBWUlLd1lCQlFVSEFRRUVlREIyTUU0R0NDc0dBUVVGQnpBQ2hrSm9kSFJ3T2k4dlkzSjBMbU52Ylc5a2IyTmhMbU52YlM5RFQwMVBSRTlGZUhSbGJtUmxaRlpoYkdsa1lYUnBiMjVUWldOMWNtVlRaWEoyWlhKRFFTNWpjblF3SkFZSUt3WUJCUVVITUFHR0dHaDBkSEE2THk5dlkzTndMbU52Ylc5a2IyTmhMbU52YlRBb0JnTlZIUkVFSVRBZmdoMW1aV1JsY21GMGFXOXVMbTFoWkdsemIyNWpiMnhzWldkbExtVmtkVEFOQmdrcWhraUc5dzBCQVFVRkFBT0NBUUVBWDh0djcybS9FK1pTd3ZoU01kM0FjZGVsbGZ3NXQvY3lyZmhTUGh2V212c2VKbVYzK2dGNmZiaUQ4ejlJM28vZnEyVks3TFUvcjBnajhIVnVnNjBoc2tjeWRaZ0VtM0l5aW1qci9KNE53TFB2SENxZ0JtcHJBK0s1RzBvaEV5RVExRW1Gd1cydXBtWFNIM2gxbW91WjRxaThpZ21UK2NDSzk3bWdkUDRtZmVVL3BlN2V4aTFPS0FSZmpkbHVIbnExU2djZ3Btc2ZwUEhKUXgvQXlsQnltcHBpMFV3L0tTVkFLVThlNWIzNlR1a0tvZU9IcGlIamZMSHdtckpUUWErbDJGSG1iN0ErTFg1d0IzbWFaNjMwQ2ZLeWhnY1dndnBCeWRaa0hJbjR2UEtxeHFVSWhSYWZBTDRjZUx5aWRVMldwVXgxcDN6eFV3Z05wczVudldhS0xBPT08L2RzOlg1MDlDZXJ0aWZpY2F0ZT48L2RzOlg1MDlEYXRhPjwvS2V5SW5mbz48L2RzOlNpZ25hdHVyZT48U3ViamVjdD48TmFtZUlEPjI2NDUyMzg8L05hbWVJRD48U3ViamVjdENvbmZpcm1hdGlvbiBNZXRob2Q9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpjbTpiZWFyZXIiPjxTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBOb3RPbk9yQWZ0ZXI9IjIwMTUtMDYtMjNUMTc6NTg6MzcuMTUxWiIgUmVjaXBpZW50PSJodHRwczovL2Fza21hZGlzb25jb2xsZWdlLS10c3QuY3VzdGhlbHAuY29tL2NpL29wZW5sb2dpbi9zYW1sL3N1YmplY3QvQ29udGFjdC5DdXN0b21GaWVsZHMuc3R1ZGVudF9pZCIgLz48L1N1YmplY3RDb25maXJtYXRpb24%2BPC9TdWJqZWN0PjxDb25kaXRpb25zIE5vdEJlZm9yZT0iMjAxNS0wNi0yM1QxNzo0ODozNy4xNTFaIiBOb3RPbk9yQWZ0ZXI9IjIwMTUtMDYtMjNUMTg6NDg6MzcuMTUxWiI%2BPEF1ZGllbmNlUmVzdHJpY3Rpb24%2BPEF1ZGllbmNlPmh0dHBzOi8vYXNrbWFkaXNvbmNvbGxlZ2UtLXRzdC5jdXN0aGVscC5jb20vY2dpLWJpbi9hc2ttYWRpc29uY29sbGVnZS5jZmcvcGhwL2FkbWluL3Nzb19sYXVuY2gucGhwPC9BdWRpZW5jZT48L0F1ZGllbmNlUmVzdHJpY3Rpb24%2BPC9Db25kaXRpb25zPjxBdXRoblN0YXRlbWVudCBBdXRobkluc3RhbnQ9IjIwMTUtMDYtMjNUMTc6NTM6MzcuMTIwWiIgU2Vzc2lvbkluZGV4PSJfMGY2MTBmMzYtN2Q4NS00MTdiLThmMGItZDViN2YxMWQyOGIzIj48QXV0aG5Db250ZXh0PjxBdXRobkNvbnRleHRDbGFzc1JlZj51cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YWM6Y2xhc3NlczpQYXNzd29yZFByb3RlY3RlZFRyYW5zcG9ydDwvQXV0aG5Db250ZXh0Q2xhc3NSZWY%2BPC9BdXRobkNvbnRleHQ%2BPC9BdXRoblN0YXRlbWVudD48L0Fzc2VydGlvbj48L3NhbWxwOlJlc3BvbnNlPg%3D%3D"
Clear-Variable Decoded

#$SAMLResponse = "7b0HYBxJliUmL23Ke39K9UrX4HShCIBgEyTYkEAQ7MGIzeaS7B1pRyMpqyqBymVWZV1mFkDM7Z28995777333nvvvfe6O51OJ%2fff%2fz9cZmQBbPbOStrJniGAqsgfP358Hz8iHjfZolw9Ol638%2bWr%2fBet86ZNz55%2b9tHvvz%2fdOd89eDjZ3r23f297%2f%2f7edHsyPc%2b384Pd%2b5MHD2b5eZZ%2flP5kXjdFtfzso73xzkfpWdOs87Nl02bLlj7a2b2%2fvfNge%2ffBm917j3Z2Hu3ujD%2f99OFPfZQ%2bpV6KZdbym%2fO2XTWP7t49z2d5zZ%2bNF9msaKrltCrL%2fCIf57P13Wx23twtm7sfpSfVsskBf10vH1VZUzSPltkibx6100evj794%2fohQeTSVRo%2fWy2aVT4vzIp99lL5blMvmEQ9489urumor6v2jo8c8pFpe3fxS1jR5DfQ%2fOsKQbjcieuWymObN3bZeN%2b3ju9Ld0WMa5KzAm817dv34eD0r8uU0f0U0rospPnUfGsyurq7GV1X9dpZdj6fV4vFd28D9GgC46xCiP%2fo8c%2fT%2fAA%3d%3d"

$Base = [System.Web.HttpUtility]::UrlDecode($SAMLResponse)
$Decoded = [xml][System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($Base))

Write-Host "Subject:    " $Decoded.Response.Assertion.Subject.NameID
Write-Host "            " $decoded.Response.Consent
Write-Host "Not Before: " $Decoded.Response.Assertion.Conditions.NotBefore
Write-Host "Not After:  " $Decoded.Response.Assertion.Conditions.NotOnOrAfter
Write-Host "Audience:   " $Decoded.Response.Assertion.Conditions.AudienceRestriction.Audience
Write-Host "Issuer:     " $Decoded.Response.Assertion.Issuer
Write-Host "Destination:" $Decoded.Response.Destination
Write-Host "Certificate:" 
$decoded.Response.Assertion.Signature.KeyInfo.X509Data.X509Certificate